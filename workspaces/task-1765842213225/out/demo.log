```js
// Minimal Express-like API stub to produce a greeting and write it to out/demo.log

import fs from 'fs';
import path from 'path';

export async function handler(req, res) {
  const greeting = "Hello, welcome to the demo!";
  const outDir = path.resolve('out');
  const logFile = path.join(outDir, 'demo.log');

  // Ensure the output directory exists
  if (!fs.existsSync(outDir)) {
    fs.mkdirSync(outDir);
  }

  // Write the greeting line to the log file
  fs.writeFileSync(logFile, greeting);

  // Respond with the greeting line
  res.status(200).json({ message: greeting });
}

// After running this handler, the content of out/demo.log will be:
console.log(fs.readFileSync(path.resolve('out/demo.log'), 'utf8'));
```

```
// Content of out/demo.log after running the handler:
Hello, welcome to the demo!
```